(function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!1):function(a){if(!a.document)throw new Error("GlobalThis must have document for word");return b(a)}:b(a)})("undefined"==typeof window?this:window,function(window,isGlobal){const replaceHtmlEntites=function(){var a={nbsp:String.fromCharCode(160),amp:"&",quot:"\"",lt:"<",gt:">"},b=function(b,c){return a[c]};return function(a){return a.replace(/&(nbsp|amp|quot|lt|gt);/g,b)}}();Object.prototype.do=function(a){return a.call(this),this},Object.prototype.getPropery=function(a){if(!this)return null;if(!a)return this;let b=this[a];return b?b:this};var version="1.0.0.4",UVComponent=function(){this.id=void 0,this.shadow=void 0,this.style=void 0,this.script=void 0,this.element=void 0,this.other=void 0},UVRenderer=function(){this.domParser=new DOMParser},UV=function(){this.uvRenderer=void 0,this.components=[]};UVComponent.from=async function(a){var b=new UVComponent;const c=(await a).documentElement;return b.element=c,b.id=c.getAttribute("id"),b.shadow=c.getElementsByTagName("shadow")[0],b.style=[...c.querySelectorAll("style")].find(a=>0==a.attributes.length),b.script=c.getElementsByTagName("script")[0],b.other=[...c.children].filter(a=>0!=a.attributes.length),b},UVComponent.renderCSS=function(a){const b=[...a.matchAll(/\s*(.*)\s*\{\s*([^{}]*)\s*\}/gm)];if(b.some(a=>3!=a.length))throw new Error("Length error");return b.map(a=>({selector:a.at(1).trim(),value:a.at(2).trim().replace(/[\r\n\t]/gm,"").split(";").map(a=>a.split(":").map(a=>a.trim())).filter(a=>a.some(a=>""!=a))}))},UVRenderer.prototype.render=async function(a){const b=await fetch(a).then(a=>a.text());return this.domParser.parseFromString(`<component id="${a.split(/[\/\\]/g).at(-1).split(".").at(0)}">${b}</component>`.replace(/&/gm,"&amp;"),"application/xml")},UVRenderer.prototype.renderText=async function(a,b){return this.domParser.parseFromString(`<component id="${await a}">${await b}</component>`.replace(/&/gm,"&amp;"),"application/xml")},UV.prototype.createRenderer=function(){return this.uvRenderer=new UVRenderer},UV.prototype.add=function(...a){this.components.push(...a)},UV.prototype.define=function(...a){a.forEach(async a=>{const b=(this.uvRenderer||this.createRenderer()).render(a),c=UVComponent.from(b);this.add(c)})},UV.prototype.defineFromMUV=function(a,b){const c=(this.uvRenderer||this.createRenderer()).renderText(a,window.atob(b)),d=UVComponent.from(c);this.components.push(d)},UV.prototype.render=function(){window.document.head.appendChild(document.createElement("style").do(function(){this.innerHTML+="@import url(\"https://raw.githubusercontent.com/UV-mod/source/main/uvcondo/uvcondo.css\")"})),this.components.forEach(async _comp=>{function getAbsInnerHTML(a){if(0==a.children.length)return`<${a.tagName} ${[...a.attributes].map(a=>`${a.name}="${a.value}"`).join(" ")||""}>${a.innerHTML}</${a.tagName}>`;const b=[...a.children];var c="";return b.forEach(a=>{c+=getAbsInnerHTML(a)}),`<${a.tagName} ${[...a.attributes].map(a=>`${a.name}="${a.value}"`).join(" ")||""}>${c}</${a.tagName}>`}const component=await _comp,html=component.shadow,componentName="uv-"+component.id;var componentClass;componentClass=class extends HTMLElement{constructor(){super(),this.style.margin="0.5rem",!this.innerHTML||(this.dataset.value=this.innerHTML)}connectedCallback(){if(this.shadow=void 0,0!=html.children.length&&(this.shadow=this.attachShadow({mode:"open"})),this.css=document.createElement("style"),this.css.innerHTML+=replaceHtmlEntites(component.style.innerHTML),(this.shadow||window.document.head).appendChild(this.css),null!=this.shadow){let a=getAbsInnerHTML(html);this.inner=/\$text/gm.exec(a),/\$text/gm.test(a)&&(this.shadow.innerHTML+=a.replace(/\$text/gm,this.dataset?.value||this.innerHTML).trim(),this.innerHTML="")}this.startScript=eval(`(function(multiMethod, parentElement, shadow){${replaceHtmlEntites(component.script.innerHTML)}})`),(this.shadow||this).style=(this.shadow||this).querySelector("style"),(this.shadow||this).templates=new class{constructor(a){this.ps=window.document.createElement("div"),a.forEach(a=>this.ps.appendChild(a)),this.row=a}getElement(a,b){return this.ps.querySelector(a)?.getPropery(b)}}(component.other),this.fnres=this.startScript.call(this.shadow||this,{adaptiveColor:function(a,b="#000000",c="#ffffff"){var d=a.substring(a.indexOf("(")+1,a.lastIndexOf(")")).split(/,\s*/),e=d[0],f=d[1],g=d[2],h=Math.sqrt(e*e+f*f+g*g);return 128<h?b:c}},this.parentElement,this.shadow),[...this.attributes].forEach(a=>{this.attributeChangedCallback(a.name,a.value,a.value)}),this.events={},this.fnres?.events?.forEach(()=>{}),componentClass.attr=this.fnres?.observe?.attributes}disconnectedCallback(){}static get observedAttributes(){return this.attr||[]}attributeChangedCallback(a,b,c){this?.fnres?.observe?.callback(a,b,c)}adoptedCallback(){}},window.customElements.define(componentName,componentClass)})};let uv=new UV;return uv.classes={UVComponent,UVRenderer,UV},isGlobal?uv:void(window.uv=uv)});